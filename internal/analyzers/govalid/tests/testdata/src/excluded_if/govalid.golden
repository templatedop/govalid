// Code generated by govalid; DO NOT EDIT.
package excluded_if

import (
	"errors"

	"github.com/sivchari/govalid"
	govaliderrors "github.com/sivchari/govalid/validation/errors"
)

var (
	// ErrNilAccount is returned when the Account is nil.
	ErrNilAccount = errors.New("input Account is nil")

	// ErrAccountPasswordExcludedIfValidation is the error returned when the field must be absent due to another field's value.
	ErrAccountPasswordExcludedIfValidation = govaliderrors.ValidationError{Reason: "field Password must be absent when Type equals \"guest\"", Path: "Account.Password", Type: "excluded_if"}

	// ErrAccountCreditCardExcludedIfValidation is the error returned when the field must be absent due to another field's value.
	ErrAccountCreditCardExcludedIfValidation = govaliderrors.ValidationError{Reason: "field CreditCard must be absent when Plan equals \"free\"", Path: "Account.CreditCard", Type: "excluded_if"}
)

func ValidateAccount(t *Account) error {
	if t == nil {
		return ErrNilAccount
	}

	var errs govaliderrors.ValidationErrors

	if t.Type == "guest" && t.Password != "" {
		err := ErrAccountPasswordExcludedIfValidation
		err.Value = t.Password
		errs = append(errs, err)
	}

	if t.Plan == "free" && t.CreditCard != "" {
		err := ErrAccountCreditCardExcludedIfValidation
		err.Value = t.CreditCard
		errs = append(errs, err)
	}

	if len(errs) > 0 {
		return errs
	}
	return nil
}

var _ govalid.Validator = (*Account)(nil)

func (t *Account) Validate() error {
	return ValidateAccount(t)
}
