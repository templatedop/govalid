// Code generated by govalid; DO NOT EDIT.
package required_unless

import (
	"errors"

	"github.com/templatedop/govalid"
	govaliderrors "github.com/templatedop/govalid/validation/errors"
)

var (
	// ErrNilPayment is returned when the Payment is nil.
	ErrNilPayment = errors.New("input Payment is nil")

	// ErrPaymentCardNumberRequiredUnlessValidation is the error returned when the field is required unless another field has a specific value.
	ErrPaymentCardNumberRequiredUnlessValidation = govaliderrors.ValidationError{Reason: "field CardNumber is required unless PaymentMethod equals \"cash\"", Path: "Payment.CardNumber", Type: "required_unless"}

	// ErrPaymentAccountIDRequiredUnlessValidation is the error returned when the field is required unless another field has a specific value.
	ErrPaymentAccountIDRequiredUnlessValidation = govaliderrors.ValidationError{Reason: "field AccountID is required unless AccountType equals \"guest\"", Path: "Payment.AccountID", Type: "required_unless"}
)

func ValidatePayment(t *Payment) error {
	if t == nil {
		return ErrNilPayment
	}

	var errs govaliderrors.ValidationErrors

	if t.PaymentMethod != "cash" && t.CardNumber == "" {
		err := ErrPaymentCardNumberRequiredUnlessValidation
		err.Value = t.CardNumber
		errs = append(errs, err)
	}

	if t.AccountType != "guest" && t.AccountID == "" {
		err := ErrPaymentAccountIDRequiredUnlessValidation
		err.Value = t.AccountID
		errs = append(errs, err)
	}

	if len(errs) > 0 {
		return errs
	}
	return nil
}

var _ govalid.Validator = (*Payment)(nil)

func (t *Payment) Validate() error {
	return ValidatePayment(t)
}
